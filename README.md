# 0G iNFT Starter Kit

A complete TypeScript/Hardhat project for building and deploying intelligent NFTs (iNFTs) using the 0G protocol.

## Overview

This starter kit provides:
- AgentNFT smart contract implementation following ERC-7857 standard
- TypeScript library for encryption, storage, and metadata management
- Example scripts for minting, transferring, and cloning AgentNFTs
- Complete deployment setup with Hardhat Ignition

## Features

- **Intelligent NFTs**: Store and manage AI agents as NFTs with encrypted metadata
- **0G Storage Integration**: Decentralized storage for AI agent data
- **Transfer Proofs**: TEE/ZKP-based proof verification for secure transfers
- **Key Management**: ECIES encryption for secure key sealing/unsealing
- **Upgradeable Contracts**: Beacon proxy pattern for contract upgrades

## Quick Start

### 1. Installation

```bash
# Clone and install dependencies
pnpm install

# Compile contracts
pnpm run build
```

### 2. Environment Setup

Create a `.env` file:

```bash
# Deployment
PRIVATE_KEY=your_private_key_here
RPC_URL=http://localhost:8545

# Contract addresses (set after deployment)
AGENT_NFT_ADDRESS=

# 0G Network Configuration
ZG_RPC_URL=https://evmrpc-testnet.0g.ai/
ZG_INDEXER_URL=https://indexer-storage-testnet-turbo.0g.ai/
ZG_CHAIN_ID=16601

# 0G Turbo Network (for enhanced storage)
TURBO_INDEXER_RPC=https://indexer-storage-testnet-turbo.0g.ai/
TURBO_EXPLORER_URL=https://chainscan-galileo.0g.ai/tx/
```

### 3. Deploy Contracts

```bash
# Deploy to local network
pnpm run deploy:localhost

# Deploy to 0G Galileo testnet (default)
pnpm run deploy
```

### 4. Run Examples

After deployment, update `AGENT_NFT_ADDRESS` in `.env` and run:

```bash
# Mint a new AgentNFT
pnpm run mint-example

# Transfer token (requires tokenId and recipient address)
pnpm run transfer-example 1 0x742d35Cc...

# Clone token (requires tokenId and recipient address)
pnpm run clone-example 1 0x742d35Cc...
```

## Architecture

### Smart Contracts

- **AgentNFT.sol**: Main iNFT contract implementing ERC-7857
- **IERC7857DataVerifier.sol**: Interface for proof verification
- **TEEVerifier.sol**: Mock verifier for testing (replace with actual TEE/ZKP verifier)

### TypeScript Library

- **EncryptionService**: ECIES encryption for key sealing
- **OGStorage**: 0G storage integration
- **MetadataManager**: AI agent metadata management
- **TransferManager**: Transfer and clone proof generation
- **AgentNFTClient**: High-level client for contract interaction

## Contract Functions

### Minting

```typescript
// Mint new AgentNFT
const result = await client.mint({
  model: 'gpt-4-agent',
  weights: 'https://storage.example.com/weights.bin',
  config: { temperature: 0.7 },
  capabilities: ['nlp', 'analysis'],
  description: 'AI financial analyst'
});
```

### Transfer

```typescript
// Transfer to another address (re-encrypts data)
const txHash = await client.transfer(tokenId, recipientAddress);
```

### Clone

```typescript
// Clone with modifications
const result = await client.clone(tokenId, recipientAddress, {
  description: 'Enhanced clone',
  config: { temperature: 0.8 }
});
```

## Proof Generation

The system uses two types of proofs:

1. **Preimage Proofs**: For mint/update operations
   - Verify knowledge of data preimage
   - Generated by TEE/ZKP systems

2. **Transfer Validity Proofs**: For transfer/clone operations
   - Verify old data ownership
   - Prove correct re-encryption
   - Validate sealed key for recipient

## Development

### Testing

```bash
# Run tests
pnpm run test

# Run with coverage
npx hardhat coverage
```

### Local Development

```bash
# Start local node
pnpm run node

# Deploy to local node (in another terminal)
pnpm run deploy:localhost

# Run examples
pnpm run mint-example
```

## Security Considerations

- **Key Sealing**: Currently uses XOR for demo; use ECIES in production
- **Proof Verification**: Mock verifier included; integrate real TEE/ZKP
- **Private Keys**: Never commit private keys to repository
- **Storage**: Ensure 0G storage endpoints are secure

## Configuration Files

- `hardhat.config.ts`: Hardhat configuration with networks
- `ignition/modules/AgentNFTDeploy.ts`: Deployment configuration
- `lib/types/index.ts`: TypeScript type definitions

## License

MIT License - see LICENSE file for details.

## Contributing

1. Fork the repository
2. Create a feature branch
3. Make your changes
4. Add tests
5. Submit a pull request

## Support

For questions and support:
- Check the [0G documentation](https://docs.0g.ai/)
- Open an issue on GitHub
- Join the 0G community Discord
